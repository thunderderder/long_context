# 使用示例

## 基础使用流程

### 1. 启动服务

确保后端和前端都已启动：

```bash
# 终端 1 - 启动后端
cd backend
python app.py

# 终端 2 - 启动前端
cd frontend
npm start
```

### 2. 创建文章

#### 步骤 1：输入主题

在左侧输入框中输入您的主题，例如：

```
人工智能在教育领域的应用与挑战
```

#### 步骤 2：生成大纲

点击"生成大纲"按钮。AI 会生成类似如下的大纲：

```markdown
## 人工智能在教育中的现状

### 个性化学习
### 智能评估系统
### 虚拟教学助手

## 人工智能教育应用的优势

### 提高教学效率
### 促进教育公平
### 增强学习体验

## 面临的挑战

### 技术挑战
### 隐私与安全问题
### 教师角色转变

## 未来展望

### 技术发展趋势
### 政策建议
```

#### 步骤 3：编辑大纲（可选）

在右侧的"大纲"标签页中，您可以：
- 修改标题文字
- 调整章节顺序
- 添加或删除章节

#### 步骤 4：选择生成模式

**依次生成模式：**
- 适合需要精细控制的场景
- 每生成一段后暂停，等待您确认
- 可以随时停止或修改方向

**一次性生成模式：**
- 适合快速生成完整文章
- 自动生成所有章节
- 无需人工干预

#### 步骤 5：生成内容

点击"开始生成内容"按钮。系统会：
1. 显示当前生成进度
2. 实时展示生成的内容
3. 在右侧编辑器中显示完整文本

#### 步骤 6：查看和导出

切换到"内容"标签页查看生成的文章，或切换到"预览"标签页查看渲染效果。

可以使用工具栏按钮：
- 📋 复制到剪贴板
- ⬇️ 下载为 Markdown 文件

## 高级使用技巧

### 1. 优化主题描述

**不好的示例：**
```
人工智能
```

**好的示例：**
```
人工智能在K-12教育中的应用现状、面临的挑战以及未来发展趋势，重点关注个性化学习和智能评估
```

**建议：**
- 明确主题范围
- 指出重点关注的方面
- 提及预期的深度和广度

### 2. 调整大纲结构

生成的大纲可能需要优化：

**原始大纲：**
```markdown
## 介绍
## 应用
## 挑战
## 结论
```

**优化后：**
```markdown
## 引言：AI教育革命的到来

## 核心应用领域
### 个性化学习路径
### 智能教学辅助
### 自动化评估系统

## 实践中的挑战
### 技术层面的限制
### 伦理与隐私问题
### 师资培训需求

## 成功案例分析
### 案例一：某小学的AI实践
### 案例二：在线教育平台的应用

## 展望与建议
```

### 3. 使用依次生成模式进行迭代

对于重要文章，建议使用依次生成模式：

1. 生成第一段
2. 检查质量和方向
3. 如果满意，继续下一段
4. 如果不满意：
   - 在右侧编辑器中修改已生成内容
   - 调整大纲
   - 重新开始生成

### 4. 处理长文章

对于超过 5000 字的长文章：

1. **分阶段生成：**
   - 将大纲分成几个主要部分
   - 分别生成每个部分
   - 最后手动整合

2. **利用上下文管理：**
   - 系统会自动处理长上下文
   - 已生成的内容会被摘要或截取
   - 确保新内容与之前保持连贯

3. **定期保存：**
   - 使用"复制"或"下载"功能保存进度
   - 避免因意外丢失内容

## API 直接调用示例

### 使用 Python

```python
import requests
import json

# 配置
API_BASE_URL = "http://localhost:5000/api"

# 生成大纲
def generate_outline(topic):
    response = requests.post(
        f"{API_BASE_URL}/generate-outline",
        json={"topic": topic}
    )
    return response.json()["outline"]

# 生成单个章节
def generate_section(topic, outline, section, previous_content=""):
    response = requests.post(
        f"{API_BASE_URL}/generate-section",
        json={
            "topic": topic,
            "outline": outline,
            "current_section": section,
            "previous_content": previous_content
        },
        stream=True
    )
    
    content = ""
    for line in response.iter_lines():
        if line:
            line_str = line.decode('utf-8')
            if line_str.startswith('data: '):
                data = json.loads(line_str[6:])
                if 'content' in data:
                    content += data['content']
                    print(data['content'], end='', flush=True)
    
    return content

# 使用示例
if __name__ == "__main__":
    topic = "人工智能在教育领域的应用"
    
    # 1. 生成大纲
    print("生成大纲...")
    outline = generate_outline(topic)
    print(f"\n大纲：\n{outline}\n")
    
    # 2. 生成第一个章节
    section = "## 人工智能在教育中的现状"
    print(f"\n生成章节：{section}")
    content = generate_section(topic, outline, section)
    print(f"\n\n生成完成！")
```

### 使用 JavaScript/Node.js

```javascript
const fetch = require('node-fetch');

const API_BASE_URL = 'http://localhost:5000/api';

// 生成大纲
async function generateOutline(topic) {
  const response = await fetch(`${API_BASE_URL}/generate-outline`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ topic })
  });
  const data = await response.json();
  return data.outline;
}

// 生成章节（流式）
async function generateSection(topic, outline, section, previousContent = '') {
  const response = await fetch(`${API_BASE_URL}/generate-section`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      topic,
      outline,
      current_section: section,
      previous_content: previousContent
    })
  });

  const reader = response.body.getReader();
  const decoder = new TextDecoder();
  let content = '';

  while (true) {
    const { done, value } = await reader.read();
    if (done) break;

    const chunk = decoder.decode(value);
    const lines = chunk.split('\n');

    for (const line of lines) {
      if (line.startsWith('data: ')) {
        try {
          const data = JSON.parse(line.slice(6));
          if (data.content) {
            content += data.content;
            process.stdout.write(data.content);
          }
        } catch (e) {
          // 忽略解析错误
        }
      }
    }
  }

  return content;
}

// 使用示例
(async () => {
  const topic = '人工智能在教育领域的应用';
  
  // 1. 生成大纲
  console.log('生成大纲...');
  const outline = await generateOutline(topic);
  console.log(`\n大纲：\n${outline}\n`);
  
  // 2. 生成第一个章节
  const section = '## 人工智能在教育中的现状';
  console.log(`\n生成章节：${section}\n`);
  const content = await generateSection(topic, outline, section);
  console.log('\n\n生成完成！');
})();
```

## 最佳实践

### 1. 主题选择

- ✅ 选择您熟悉的领域
- ✅ 明确文章的目标受众
- ✅ 定义合适的深度和广度
- ❌ 避免过于宽泛或模糊的主题
- ❌ 避免过于技术性的细节主题（除非您需要专业文章）

### 2. 大纲优化

- ✅ 保持逻辑清晰的层次结构
- ✅ 每个章节标题简洁明了
- ✅ 适当使用二级和三级标题
- ❌ 避免过深的嵌套（不超过3级）
- ❌ 避免章节数量过多（建议3-8个主要章节）

### 3. 生成策略

- ✅ 首次使用时选择"依次生成"熟悉流程
- ✅ 对重要内容使用"依次生成"以便审查
- ✅ 对一般性内容可使用"一次性生成"提高效率
- ✅ 定期保存生成的内容
- ❌ 不要生成过长的单篇文章（建议控制在 5000 字以内）

### 4. 内容编辑

- ✅ 生成后仔细审阅内容
- ✅ 补充具体的数据和案例
- ✅ 调整语气和风格以匹配目标受众
- ✅ 检查事实准确性
- ❌ 不要完全依赖 AI 生成的内容
- ❌ 不要忽视必要的人工润色

### 5. 性能优化

- ✅ 保持网络连接稳定
- ✅ 在非高峰时段使用以获得更快响应
- ✅ 合理规划生成任务的时间
- ❌ 避免同时生成多篇文章
- ❌ 避免频繁中断和重新开始

## 常见问题

### Q: 生成的内容与我的期望不符怎么办？

**A:** 
1. 检查主题描述是否足够明确
2. 优化大纲结构，提供更清晰的指引
3. 使用"依次生成"模式，及时调整方向
4. 在生成后手动编辑和完善内容

### Q: 可以生成多种语言的内容吗？

**A:** 
是的，您可以用任何语言输入主题，AI 会尝试用相同语言生成内容。目前支持中文和英文效果最好。

### Q: 生成的内容会重复吗？

**A:** 
系统设计了上下文管理机制来避免重复。如果发现重复：
1. 检查大纲是否有重复的章节
2. 使用更具体的章节标题
3. 在编辑时手动删除重复内容

### Q: 如何提高生成速度？

**A:**
1. 确保网络连接稳定
2. 使用更简洁的主题描述
3. 减少章节数量
4. 选择非高峰时段使用

### Q: 可以保存生成历史吗？

**A:**
目前需要手动保存。建议：
1. 使用"下载"功能保存为 Markdown 文件
2. 复制内容到本地文档管理器
3. 未来版本可能会添加自动保存功能

## 联系与反馈

如果您有任何问题或建议，欢迎：
- 提交 GitHub Issue
- 发送邮件反馈
- 参与社区讨论

---

**祝您写作愉快！** ✍️

